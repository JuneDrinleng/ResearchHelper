<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <title>æ¬¢è¿ - ResearchHelper</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
    />
    <style>
      * {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
      }
      html,
      body {
        height: 100%;
        font-family: "Segoe UI", sans-serif;
        transition: background-color 0.3s, color 0.3s;
      }

      body.light-mode {
        background: #f9fafc;
        color: #000;
      }
      body.dark-mode {
        background: #1e1e1e;
        color: #eee;
      }

      .container {
        display: flex;
        height: 100vh;
      }

      /* â”€â”€ ä¾§è¾¹æ  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
      .sidebar {
        width: 72px;
        background: #000;
        padding: 20px 0;
        display: flex;
        flex-direction: column;
        justify-content: space-between;
        align-items: center;
      }

      .logo,
      .nav-links a,
      .footer {
        /* æŠŠ footer ä¹Ÿå½“æŒ‰é’®å¤„ç† */
        display: flex;
        justify-content: center;
        align-items: center;
        width: 40px;
        height: 40px;
        margin-bottom: 20px;
        font-size: 24px;
        color: #fff;
        text-decoration: none;
        border-radius: 8px;
        transition: background 0.2s, transform 0.2s, color 0.2s;
        cursor: pointer;
      }

      .logo:hover,
      .nav-links a:hover,
      .footer:hover {
        background: #a2c9ef;
        transform: translateY(-2px);
      }

      .nav-links a.active {
        background: #5da3fa;
        color: #000;
      }
      body.dark-mode .nav-links a.active {
        background: #2e7ae5;
        color: #fff;
      }

      /* â”€â”€ ä¸»åŒºåŸŸ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
      .main {
        flex: 1;
      }
      iframe {
        width: 100%;
        height: 100%;
        border: none;
        display: block;
        background: #1e1e1e; /* match = dark */
      }
      body.light-mode iframe {
        background: #f9fafc; /* match = light */
      }
    </style>
  </head>
  <body>
    <div class="container">
      <!-- ä¾§è¾¹æ  -->
      <div class="sidebar">
        <!-- é¡¶éƒ¨ Logoï¼šğŸ“Ÿ -->
        <a href="#" class="logo" title="ResearchHelper">ğŸ“Ÿ</a>

        <!-- å¯¼èˆª -->
        <div class="nav-links">
          <a data-src="./hotsearch.html" title="çƒ­æœ"
            ><i class="fa-solid fa-fire"></i
          ></a>
          <a data-src="settings.html" title="è®¾ç½®"
            ><i class="fa-solid fa-gear"></i
          ></a>
        </div>

        <!-- åº•éƒ¨ç‰ˆæƒï¼šç‚¹å®ƒåˆ‡æ¢ about.html -->
        <a class="footer" data-src="about.html" title="å…³äº"
          ><i class="fa-solid fa-user-astronaut"></i
        ></a>
      </div>

      <!-- å³ä¾§ iframe -->
      <div class="main">
        <iframe id="mainFrame" name="mainFrame" src="./hotsearch.html"></iframe>
      </div>
    </div>

    <script>
      /* ä¸»é¢˜åˆå§‹åŒ– */
      document.body.classList.add(
        (localStorage.getItem("theme") || "light") + "-mode"
      );

      document.addEventListener("DOMContentLoaded", () => {
        const iframe = document.getElementById("mainFrame");
        const navLinks = document.querySelectorAll(".nav-links a");
        const footer = document.querySelector(".footer[data-src]");

        /** é«˜äº®å¤„ç† */
        function setActive(link) {
          navLinks.forEach((l) => l.classList.toggle("active", l === link));
        }

        /* ä¾§è¾¹æ æ™®é€šæŒ‰é’® */
        navLinks.forEach((link) => {
          link.addEventListener("click", (e) => {
            e.preventDefault();
            iframe.src = link.dataset.src;
            setActive(link);
          });
        });

        /* é»˜è®¤é«˜äº®ç¬¬ä¸€ä¸ªï¼ˆçƒ­æœï¼‰ */
        setActive(
          document.querySelector('.nav-links a[data-src="./hotsearch.html"]')
        );

        /* footer -> about.htmlï¼ˆä¸å‚ä¸é«˜äº®ï¼‰ */
        footer.addEventListener("click", (e) => {
          e.preventDefault();
          iframe.src = footer.dataset.src;
          setActive(null); // å–æ¶ˆä¾§æ é«˜äº®
        });
      });
      // åœ¨ä¾§æ  JS é‡Œ
      const prefetch = (url) => fetch(url).then((r) => r.blob());

      // åˆå§‹åŒ–æ—¶ï¼š
      ["hotsearch.html", "settings.html", "about.html"].forEach(prefetch);

      /* â€”â€” åŒæ­¥çˆ¶é¡µé¢ä¸»é¢˜ â€”â€” */
      (function () {
        const applyTheme = (theme = "light") => {
          document.body.classList.remove("light-mode", "dark-mode");
          document.body.classList.add(theme + "-mode");

          /* åŒæ­¥ iframe çš„çº¯è‰²åº•è‰²ï¼Œé˜²æ­¢ä¸‹ä¸€æ¬¡å¸è½½æ—¶å‡ºç°åè‰²é—ªçƒ */
          const frame = document.getElementById("mainFrame");
          if (frame)
            frame.style.background = theme === "dark" ? "#1e1e1e" : "#f9fafc";
        };

        /* é¦–æ¬¡è¿›æ¥å°±æŒ‰ localStorage ç»˜åˆ¶ */
        applyTheme(localStorage.getItem("theme"));

        /* ç›‘å¬å…¶å®ƒé¡µé¢ï¼ˆiframeï¼‰æ”¹åŠ¨ localStorage æ—¶è§¦å‘çš„ storage äº‹ä»¶ */
        window.addEventListener("storage", (e) => {
          if (e.key === "theme") applyTheme(e.newValue || "light");
        });
      })();
    </script>
  </body>
</html>
